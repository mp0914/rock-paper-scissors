<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Rock, Paper, Scissors</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
       <script>
            let choices = ['rock', 'paper', 'scissors'];

            // Return random choice for computer
            function computerPlay() {
                let computerSelection = choices[Math.floor(Math.random() * (3-0) + 0)];
                return computerSelection;
            }

            // Prompt player for choice and return 
            function userPlay () {
                while(true) {
                    let userSelection = prompt('Rock, Paper, or Scissors. Choose your weapon!') || "".toLowerCase();
                    // user enters rock, paper, or scissors or prompt resets
                    if (choices.includes(userSelection)) return userSelection;
                }
            }
            // Plays a single round
            function playRound() {
                // Set variable to store user and computer selection
                let computerSelection = computerPlay();
                let userSelection = userPlay();
                console.log(`The computer has chosen ${computerSelection}.`)
                let userWin = false;
                let tieMsg = 'It is a tie, try again!'
                let winMsg = `You win - ${userSelection} beats ${computerSelection}!`
                let loseMsg = `You lose - ${computerSelection} beats ${userSelection}!`

                // Check for tie
                if (userSelection == computerSelection) {
                    console.log(tieMsg);
                    prompt(`${tieMsg}`);
                    return 'Tie';
                }
                
                // Check for winner and delare winner or loser
                if (userSelection === 'rock' && computerSelection != 'paper') {
                    console.log(winMsg);
                    userWin = true;
                    return userWin;
                }
                if (userSelection === 'paper' && computerSelection != 'scissors') {
                    console.log(winMsg);
                    userWin = true;
                    return userWin;
                }
                if (userSelection === 'scissors' && computerSelection != 'rock') {
                    console.log(winMsg);
                    userWin = true;
                    return userWin;
                }
                else {
                    console.log(loseMsg);
                    return userWin;
                }
            }

            function game() {
                // Declare win counters
                let userWins = 0;
                let computerWins = 0;

                // Play rounds until someone has 5 wins
                while (userWins != 5 && computerWins != 5) {
                    // Play a round
                    do {userWin = playRound();} while (userWin === 'tie');
                    // let userWin = playRound(); 
                    // If the round was a tie, play another round
                    // if (userWin === 'tie') {
                    //     playRound(); 
                    // }
                    // If the user won, increment their win counter
                    if (userWin === true) userWins += 1;
                    // Otherwise, the comnputer must have won
                    else if (userWin === false) computerWins += 1;
                    console.log(`User: ${userWins} points. Computer: ${computerWins} points.`);
                }
                if (userWins === 5) return console.log(`You win the match, ${userWins} to ${computerWins}!`);
                else return console.log('The computer wins the match - Try again!');
            }
            
        
            

          
         

            
        

       </script>
        
        <script src="" async defer></script>
    </body>
</html>